
<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="../../favicon.ico">

        <title>Dashboard Template for Bootstrap</title>

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="newjavascript.js" type="text/javascript"></script>
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <style>


            #mainTable {
                border-collapse: collapse;
            }

            #mainTable td, #mainTable tr, #mainTable table {
                border: 2px solid black;
            }

        </style>

    </head>

    <body>

        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>  
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">CA 2</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a id="groupdoc" href="#">Group Documentation</a></li>
                        <li><a id="howapiworks" href="#">Api Documentation</a></li>
                    </ul>
                    <form class="navbar-form navbar-right"> 
                    </form>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <h2 class="sub-header">hvis du ser det her så fuck off.</h2>
                <div class="col-sm-3 col-md-2 sidebar">
                    <ul class="nav nav-sidebar">
                        <li><a id="getallpers" href="#">getAllPersons</a></li>
                        <li><a id="usecrod" href="#">CRUD</a></li>
                        <li><a id="getallpersshowcontinf" href="#">getAllPersonsShowContactInfo</a></li>
                        <li><a id="searchlink" href="#">Search</a></li>
                    </ul>
                </div>




                <h2 id="subheader" class="sub-header">Dashboard</h2>
                <div class="table-responsive">

                    <div id="index" style="">
                    <div id="authors">Kasper Roland Pagh, Steffen Lefort, Sebastian Ryberg </div>

                    <div id="class">3. sem</div>

                    <div id= "group">Gruppe 7</div>
                    </div>


                    <div id="crod" style="" hidden>
                        <p><b><a id="crod_Create" href="#">Create</a> </b></p>
                        <p><b><a id="crod_Edit" href="#">Edit</a> </b></p>
                        <p><b><a id="crod_Delete" href="#">Delete</a> </b></p>
                    </div>


                    <div id="delete" hidden>

                        <form style="margin-right:20px;">
                            <fieldset class="form-group" >
                                <label for="exampleInputEmail1">Delete</label>
                                <input type="text" class="form-control" id="deletebyID" placeholder="Enter valid ID">
                            </fieldset>
                            <button type="button" id="deletebtn" class="btn btn-primary">Delete</button>
                        </form>

                    </div>



                    <div id="edit" hidden>

                        <form style="margin-right:20px;">
                            <fieldset class="form-group" >
                                <label for="edit_ID">ID to edit</label>
                                <input type="text" class="form-control" id="edit_ID" placeholder="enter valid ID to edit.">
                            </fieldset>
                            <button id="edit_getdata" type="button" class="btn btn-primary">Get Data</button>
                            <fieldset class="form-group" >
                                <label for="exampleInputEmail1">First name</label>
                                <input type="text" class="form-control" id="editFirstName" placeholder="First name here">
                            </fieldset>
                            <fieldset class="form-group">
                                <label for="exampleInputPassword1">Last name</label>
                                <input type="text" class="form-control" id="editLastName" placeholder="Last name here">
                            </fieldset>
                            <fieldset class="form-group">
                                <label for="exampleInputPassword1">List of hobbies</label>
                                <input type="text" class="form-control" id="editHobbyList" placeholder="hobbyName,hobbyName,hobbyName">
                            </fieldset>


                            <button id="editBtn" type="button" class="btn btn-primary">Submit</button>
                        </form>

                    </div>



                    <div id="create" hidden>

                        <form style="margin-right:20px;">
                            <fieldset class="form-group" >
                                <label for="exampleInputEmail1">First name</label>
                                <input type="text" class="form-control" id="createFirstName" placeholder="First name here">
                            </fieldset>
                            <fieldset class="form-group">
                                <label for="exampleInputPassword1">Last name</label>
                                <input type="text" class="form-control" id="createLastName" placeholder="Last name here">
                            </fieldset>
                            <fieldset class="form-group">
                                <label for="exampleInputPassword1">List of hobbies</label>
                                <input type="text" class="form-control" id="createHobbyList" placeholder="hobbyName,hobbyName,hobbyName">
                            </fieldset>


                            <button id="createbtn" type="button" class="btn btn-primary">Submit</button>
                        </form>

                    </div>

                    <div id="getallpersons" hidden>
                        <table id="getallpersonstable" style="width: 95%;" class="table table-striped">

                        </table>

                    </div>


                    <div id="getallpersonsshowcontactinfo" hidden>

                        <table id="getallpersonsshowcontactinfotable"  style="width: 95%;" class="table table-striped">

                        </table>


                    </div>


                    <div id="search" hidden >

                        <div class="dropdown">


                            <h3>Select how you would search.</h3>
                            <select id="searchbyul" class="form-control" style="width: auto;">
                                <option value="api/person/complete/">Search persons using ID</option>
                                <option value="api/person/contactinfo/">Search contactinfo using ID</option>
                                <option value="api/person/personbyphone/">Search persons using phonenumber</option>
                            </select>
                        </div>       
                        <br>
                        <h3> Search criteria </h3>
                        <textarea placeholder="Search criteria" class="form-control" id="searchtextarea" style="width:280px;" rows="1"></textarea>
                        <br>
                        <button type="button" id="searchbtn" class="btn btn-primary" value="Submit">Search</button>
                    </div>
                    <div id="results" hidden>
                        <table id="resultstable" style="width: 95%;" class="table table-striped"></table>
                    </div>



                    <div id="groupdocumentation" hidden>

                        <h1>Test results</h1>
                        <img src="testScreenCap.PNG" alt="testResults"/>
                        <br>
                        <br>
                        <h4 style='width: 81%'>Vores test fokuserer udelukkende på vores database facade, med test af almindelige CRUD-operationer på persons. Dette tester at vores facade har forbindelse til vores database og at vores facade modtager data fra databasen.</h4>

                        
                        <h2> Inheritance Strategy</h2>
                        <p style="width: 81%">Vi har valgt at bruge Joined som inheritance strategy. Dette er fordi vi gerne ser en struktureret database - og at vores database ikke er stor nok til at vi er bekymret for hastighed. Derudover er vores Person og Company relateret operationer seperate, så det ville være fjollet at kigge alle companies igennem for at finde en person.    
                            
                            
                        </p>
                        
                        <h2>How to test the system</h2>
                        <p style="width: 81%">Se Api Documentation for fuld redegørelse af hvordan man kan teste systemet gennem Postman. </p> 
                  
                        
                        <h2>Hvem lavede hvad</h2>
                        <p>Vi delte arbejdet op, overordnet set, på denne måde</p>
                        <table class="table-striped" style="width: 95%;">
                            <tr>
                                <th>Frontend</th>
                                <th>Backend</th>
                                
                                    
                            </tr>
                            <tr>
                                <td>Sebastian: har lavet næsten alt frontend. Det vil sige næsten hele index.html</td>
                                <td>Sebastian og Kasper: har lavet entity classes. Steffen har været inde over og rettet til.</td></tr>
                            <td></td><td></td>
                            <tr>
                                <td>Kasper og Sebastian: har lavet CRUD sammen.</td>
                                <td>Steffen: har lavet næsten hele REST api. Kasper har lavet et par metoder.</td>
                                <td></td><td></td>
                                
                                
                            </tr>
                            <tr>
                                <td></td>
                                <td>Sebastian har lavet Tester - Database opsætning og populering</td></tr>
                            <tr>
                                <td></td>
                                <td>Kasper og Steffen: har lavet facaden</td></tr>
                            <tr>
                                <td></td>
                                <td>Kasper: har lavet jUnit tests samt exceptions.</td>
                            </tr>   
                            <tr>
                                <td></td>
                                <td>Steffen har lavet OPENSHIFT og stået for at få opgaven deployed.</td>
                            </tr>   
                            <tr>
                                <td></td>
                                <td>Vi har alle stået for security.</td>
                            </tr>   
                            
                        </table>
                        <h4>Vi er enige i gruppen om at alle får 5 point for deres indsats.</h4>
                        <br>
                        <br>
                        
                        
                       
                    </div>

                    <div id="apiworks" hidden>

                        <table id="mainTable" class="table table-striped" style="width: 95%;">
                            <tr>
                                <th>METHOD & PATH</th>
                                <th>DESCRIPTION</th>
                            </tr>
                            <tr>    
                                <td>
                                    <h3>GET</h3>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr >
                                <td class="td">api/person/complete </td>
                                <td class="td">Returns all persons with name and hobbies as a list of json objects</td>
                            </tr>
                            <tr>
                                <td class="td">api/person/complete/{id} </td>
                                <td class="td">Returns the person with the given {id} as a json object (Remember in our DB only every second id is a person, the rest is companies). 
                                    . If an invalid ID is provided this method throws a PersonNotFoundException (Httperror 404).</td>
                            </tr>
                            <tr>
                                <td class="td">api/person/contactinfo </td>
                                <td class="td">Returns all persons with name and contact information, as a list of json objects</td>
                            </tr>
                            <tr>
                                <td class="td">api/person/contactinfo/{id}</td>
                                <td class="td">Returns the person, with the given {id}, and it's contact information, as a json object. If an invalid ID is provided this method throws a PersonNotFoundException (Httperror 404).</td>
                            </tr>
                            <tr>    
                                <td>
                                    <h3>POST</h3>

                                </td>
                                <td>
                                </td>
                            </tr>

                            <tr>    
                                <td class="td">api/person </td>               
                                <td class="td">Creates a new person, if provided with a valid json object. A person may be created with firstName, lastName and hobbyList like this: <b>{

                                        "firstName": "Sofus",
                                        "lastName": "Ryberg",
                                        "HobbyList": [
                                        {
                                        "HobbyName": "Soccer"
                                        },
                                        {
                                        "HobbyName": "Mountain Climbing"
                                        }
                                        ]
                                        }</b>. Or it may simply be created with only name like this:<b> {
                                        "firstName": "Peter",
                                        "lastName": "Lefort"

                                        }</b> 

                                </td>
                            </tr>
                            <tr>    
                                <td><h3>PUT</h3></td>               
                                <td></td>
                            </tr>
                            <tr>    
                                <td class="td">api/person/{id} </td>               
                                <td class="td">Edits a person if provided with a valid person json object and an existing {id}. If an invalid ID is provided this method throws a PersonNotFoundException (Httperror 404).<b>{
                                        "id": 5,
                                        "firstName": "Sofus",
                                        "lastName": "Ryberg",
                                        "HobbyList": [
                                        {
                                        "HobbyName": "Soccer"
                                        },
                                        {
                                        "HobbyName": "Mountain Climbing"
                                        }
                                        ]
                                        }</b>. Or it may simply be created with only name like this:<b> {
                                        "firstName": "Peter",
                                        "lastName": "Lefort"

                                        }</b></td>
                            </tr>
                            <tr>    
                                <td>
                                    <h3>DELETE</h3>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>    
                                <td class="td">api/person/{id} </td>
                                <td class="td">Deletes the person with the given {id}. If an invalid ID is provided this method throws a PersonNotFoundException (Httperror 404).</td>
                            </tr>
                        </table>

                    </div>



                </div>
            </div>

        </div>
        <script type="text/javascript">

            var hideAll = function ()
            {
                $('#mytable').hide();
                $('#create').hide();
                $('#edit').hide();
                $('#delete').hide();
                $('#apiworks').hide();
                $('#groupdocumentation').hide();
                $('#search').hide();
                $('#getallpersonsshowcontactinfo').hide();
                $('#getallpersons').hide();
                $('#crod').hide();
                $('#results').hide();
                $('#index').hide();
            }; // hides all divs
            // searchcriteriaheader



            // subheader   
            $('#usecrod').click(function () {
                hideAll();
                $('#crod').show();
                $('#subheader').html("Select a crud Operation");
            }); // first hides all divs then shows crod links and sets subheader html to corresponding title.

            $('#crod_Create').click(function () {
                hideAll();
                $('#create').show();
                $('#subheader').html("Create Operation");

            });
            $('#createbtn').click(function () {

                hideAll();

                var data = {};
                var hobbyList = [];
                var hobbies = "";
                hobbies = $("#createHobbyList").val();
                hobbyList = hobbies.split(",");
                var hobbyString = "";
                for (i = 0; i < hobbyList.length; i++)
                {
                    if (i === (hobbyList.length - 1))
                    {
                        hobbyString = hobbyString.concat("{'HobbyName': '" + hobbyList[i] + "'}");
                    } else
                    {
                        hobbyString = hobbyString.concat("{'HobbyName': '" + hobbyList[i] + "'},");
                    }
                }
//                hobbyString = hobbyString.substring(hobbyString.lastIndexOf(","), hobbyString.length);
                data = "{" +
                        "'firstName'" + ":'" + $("#createFirstName").val() + "'," +
                        "'lastName'" + ":'" + $("#createLastName").val() + "'," +
                        "'HobbyList'" + ":" + "[" +
                        hobbyString +
                        "]" +
                        "}";





                var request = $.ajax({
                    url: "api/person",
                    type: "POST",
                    data: data,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $('#subheader').html("Vi har lavet en person!");
                    }
                });

            });

            $('#crod_Delete').click(function () {
                hideAll();
                $('#delete').show();
                $('#subheader').html("Delete Operation");





            });
            $('#deletebtn').click(function () {
                hideAll();
                var data = $("#deletebyID").val();
                var request = $.ajax({
                    url: "api/person/" + data.toString(),
                    type: "DELETE",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $('#subheader').html("Vi har slettet en person!");
                    }
                });

            });

            $('#crod_Edit').click(function () {
                hideAll();
                $('#edit').show();
                $('#subheader').html("Edit Operation");
            });

            $('#edit_getdata').click(function () {
                $.getJSON("api/person/complete/" + $("#edit_ID").val().toString(), function (data) {

                    var hobbies = "";

                    for (var i = 0; i < data.HobbyList.length; i++) {

                        if (data.HobbyList.length - 1 === i)
                        {
                            hobbies = hobbies + data.HobbyList[i].HobbyName;
                        } else
                        {
                            hobbies = hobbies + data.HobbyList[i].HobbyName + ",";
                        }

                    }

                    $('#editFirstName').val(data.firstName);
                    $('#editHobbyList').val(hobbies);
                    $('#editLastName').val(data.lastName);

                });
            });


            $('#editBtn').click(function () {
                hideAll();


                var data = {};
                var hobbyList = [];
                var hobbies = "";
                hobbies = $("#editHobbyList").val();
                hobbyList = hobbies.split(",");
                var hobbyString = "";
                for (i = 0; i < hobbyList.length; i++)
                {
                    if (i === (hobbyList.length - 1))
                    {
                        hobbyString = hobbyString.concat("{'HobbyName': '" + hobbyList[i] + "'}");
                    } else
                    {
                        hobbyString = hobbyString.concat("{'HobbyName': '" + hobbyList[i] + "'},");
                    }
                }

                data = "{" +
                        "'id'" + ":'" + $("#edit_ID").val().toString() + "'," +
                        "'firstName'" + ":'" + $("#editFirstName").val() + "'," +
                        "'lastName'" + ":'" + $("#editLastName").val() + "'," +
                        "'HobbyList'" + ":" + "[" +
                        hobbyString +
                        "]" +
                        "}";





                var request = $.ajax({
                    url: "api/person/edit/" + $("#edit_ID").val().toString(),
                    type: "PUT",
                    data: data,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $('#subheader').html("Vi har redigeret en person!");
                    }
                });

            });


            // respondmessage all messages here..






            $('#groupdoc').click(function () {
                hideAll();
                $('#groupdocumentation').show();
                $('#subheader').html("Group Documentation of Sebastian Ryberg, Steffen Lefort, Kasper Pagh");
            });
            $('#howapiworks').click(function () {
                hideAll();
                $('#apiworks').show();
                $('#subheader').html("Api Documentation");
            });







            $('#searchlink').click(function () {
                hideAll();
                $('#search').show();
                $('#subheader').html("Search");
            });

            $('#searchbtn').click(function () {
                hideAll();
                $('#results').show();
                $('#resultstable').show();
                $('#resultstable tr').remove(); // to clear the results so we dont get duplicates.
                $('#subheader').html("Search results");
                var whattosearchfor = $("#searchbyul").val();
                var searchcrit = $('#searchtextarea').val();

                var jsonpath = whattosearchfor + searchcrit;



                $.getJSON(jsonpath, function (data) {
                    if (whattosearchfor === "api/person/contactinfo/")
                    {

                        $('#resultstable').append("<tr><td><h3> Full Name </h3></td>  <td><h3> Phone  </h3></td> <td><h3> Desc  </h3></td> </tr>");
                        $('<tr><td>' + data.firstName + " " + data.lastName + '</td>' + '<td>' + data.phoneList[0].number.toString() + '</td>' + '<td>' + data.phoneList[0].description.toString() + '</td>' + '</tr>').appendTo($("#resultstable"));
                    } // end if api/person/complete
                    else
                    {
                        var hobbystring = "";
                        for (i = 0; i <= data.HobbyList.length - 1; i++) {
                            if (data.HobbyList.length - 1 === i)
                            {
                                hobbystring = hobbystring + data.HobbyList[i].HobbyName.toString();
                            } else
                            {
                                hobbystring = hobbystring + data.HobbyList[i].HobbyName.toString() + ", ";
                            }
                        }

                        $('#resultstable').append("<tr><td><h3> Full Name </h3></td>  <td><h3> Hobbies  </h3></td> </tr>");
                        $('<tr><td>' + data.firstName + " " + data.lastName + "</td> <td> " + hobbystring + '</td></tr>').appendTo($("#resultstable"));

                    } // end if personbyphone
                });
                // gets json from the api api/person/contactinfo and processes it to show.

            }); // creates top row of table with id resultstable.















            $('#getallpersshowcontinf').click(function () {
                hideAll();
                $('#getallpersonsshowcontactinfo').show();
                $('#subheader').html("All Persons Contact info.");

                $.getJSON("api/person/contactinfo", function (data) {
                    $('#getallpersonsshowcontactinfotable tr').remove();
                    $('#getallpersonsshowcontactinfotable').append("<tr><td><h3> Full name </h3></td>  <td><h3> Phone number </h3></td>  <td><h3> Description </h3></td> </tr>");
                    $.each(data, function (key, val) {


                        $('<tr><td>' + val.firstName + " " + val.lastName + '</td>' + '<td>' + "phone number : " + val.phoneList[0].number.toString() + '</td>' + '<td>' + "phone number : " + val.phoneList[0].description.toString() + '</td>' + '</tr>').appendTo($("#getallpersonsshowcontactinfotable"));
                    });
                }); // gets json from the api api/person/contactinfo and processes it to show.



            });


            $('#getallpers').click(function () {
                hideAll();
                $('#getallpersons').show();
                $('#subheader').html("All persons");
                $.getJSON("api/person/complete", function (data) {
                    $('#getallpersonstable tr').remove();
                    $('#getallpersonstable').append("<tr><td><h3> ID </h3></td> <td><h3> Full name </h3></td>  <td><h3> Hobbies </h3></td> </tr>");
                    $.each(data, function (key, val) {
                        var hobbystring = "";
                        for (i = 0; i <= val.HobbyList.length - 1; i++) {
                            if (val.HobbyList.length - 1 === i)
                            {
                                hobbystring = hobbystring + val.HobbyList[i].HobbyName.toString();
                            } else
                            {
                                hobbystring = hobbystring + val.HobbyList[i].HobbyName.toString() + ", ";
                            }

                        }
                        ;
                        $('<tr><td>' + val.id + '</td>' + '<td>' + val.firstName + " " + val.lastName + '</td>' + '<td>' + hobbystring + '</td>' + '</tr>').appendTo($("#getallpersonstable"));
                    });
                });
            }); // gets json from the api api/person/complete and processes it to show.
        </script>






        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
        <script src="../../dist/js/bootstrap.min.js"></script>
        <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
        <script src="../../assets/js/vendor/holder.min.js"></script>
        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    </body>
</html>
